"use strict"

var path = require("path");
var assert = require("chai").assert;

// Set module root directory
process.rootAPI = path.join(__dirname, "../../");
process.requireAPI = function(filePath){
  return require(path.normalize(process.rootAPI + "/" + filePath));
};

describe("UserProvider", function(){
  var userProvider; 
  
  beforeEach(function(){
    var FakeUserDatabase = require("./database/FakeUserDatabase.js");
    var UserProvider = process.requireAPI("lib/providers/UserProvider.js");
    userProvider = new UserProvider(new FakeUserDatabase()); 
  });
  
  describe("getUserByCredentials", function(){

    it("Should load a user by its credentials", function(done){
      userProvider.getUserByCredentials("name1", "pass1", function(error, data){
        assert.isNull(error);
        assert.isDefined(data);
        done();
      });

    });

  });
  
  describe("getUserById", function(){

    it("Should load a user by its id", function(done){
      userProvider.getUserById("54c7a7ded0909a3b3e8d64c4", function(error, data){
        assert.isNull(error);
        assert.isDefined(data);
        done();
      });
    });

  });

});
